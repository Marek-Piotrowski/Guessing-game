@using Guessing_Game.Models
@model Guessing_Game.Models.PeopleViewModel

@{
    ViewData["Title"] = "Index";
}

<br></br>


<form method="get" action="/People">
    <label></label>
    <input type="text" label="" name="searchQuery" />
    <input type="submit" value="Search" />
</form>

<br></br>

<form asp-action="Index"  method="post">
    <div asp-validation-summary=All class="text-danger"></div>
    <div class="form-group">
        <input name="NewName" type="text" placeholder="Name" />
    </div>
    @*<span asp-validation-for=@Model.person class="text-danger"> </span>*@
    <div class="form-group">
        <input  name="NewPhone" type="text" placeholder="Phone number" />
    </div>
    @*<span asp-validation-for="@Model.person" class="text-danger"></span>*@
    <div class="form-group">
        <label>Select City</label>
       <select name="CityName" class="form-control" asp-items="ViewBag.Cities" ></select>
    </div>
    <div class="form-group">
        <label>Select Language</label>
       <select name="LanguageName" class="form-control" asp-items="ViewBag.Languages" ></select>
    </div>
    <input type="submit" value="Add Person" class="btn btn-primary" />
</form>


<br></br>



<div class="row" >
    <div class="col-md-1">#</div>
    <div class="col-md-3">Name</div>
    <div class="col-md-3">Phone Number</div>
    <div class="col-md-2">City</div>
    <div class="col-md-2">Language</div>
    <div class="col-md-1">Link to delete</div>
</div>
    <br />
    @foreach(Person item in Model.people)
     {
       <div class="row">
            <div class="col-md-1">@item.PersonId</div>
            <div class="col-md-3">@item.Name</div>
            <div class="col-md-3">@item.PhoneNumber</div>
            <div class="col-md-2">@((ViewBag.personCities as List<City>).Find(d => d.CityId == item.CityId).CityName)</div>
            <div class="col-md-2">@((ViewBag.langs as List<Language>).Find(d => d.LanguageId == (ViewBag.personlangs as List<PersonLanguage>).Find(c => c.PersonId == item.PersonId).LanguageId).LanguageName) </div>
            <div class="col-md-1"><a asp-action="Remove" asp-controller="People" asp-route-personId="@item.PersonId">Remove</a></div>
            
        </div>

     }





